(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{732:function(t,a,s){"use strict";s.r(a);var n=s(74),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"动静分离概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动静分离概念"}},[t._v("#")]),t._v(" 动静分离概念")]),t._v(" "),a("p",[t._v("Nginx动静分离简单地说，就是把动态请求和静态请求分开，不能理解为将动态页面和静态页面分开，严格意义上说是将动态请求和静态请求分开，可以理解为Nginx处理静态请求，Tomcat处理动态请求。动静分离从目前实现角度来看分为两种。")]),t._v(" "),a("ol",[a("li",[t._v("纯粹把静态文件独立成单独的域名，放在独立的服务器上，也是目前主流推崇的方案。")]),t._v(" "),a("li",[t._v("另外一种就是动态和静态文件混合在一起发布，通过nginx来分开。")])]),t._v(" "),a("p",[t._v("nginx通过 location 指定不同的后缀名实现不同的请求转发，通过 expires 参数设置浏览器缓存过期时间，减少与服务器之间的请求和流量。")]),t._v(" "),a("h2",{attrs:{id:"准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),a("p",[t._v("在Linux系统中准备静态资源，用于测试。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("在Linux根目录下新建一个"),a("code",[t._v("data")]),t._v("目录、在"),a("code",[t._v("data")]),t._v("目录下新建"),a("code",[t._v("image")]),t._v("和"),a("code",[t._v("www")]),t._v("目录，")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("image")]),t._v("目录用于存放图片，随便上传一张照片即可。")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("www")]),t._v("目录用于存放html格式的"),a("code",[t._v("a.html")]),t._v("文件。")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Test Html"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("这样，我们就在"),a("code",[t._v("\\data\\image")]),t._v("和"),a("code",[t._v("\\data\\www")]),t._v("目录")]),t._v(" "),a("h2",{attrs:{id:"具体配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#具体配置"}},[t._v("#")]),t._v(" 具体配置")]),t._v(" "),a("p",[t._v("打开"),a("code",[t._v("nginx.conf")]),t._v("配置文件，找到监听80端口的虚拟主机"),a("code",[t._v("server")]),t._v("块，配置location。这里配置了"),a("code",[t._v("location /www/")]),t._v("、"),a("code",[t._v("location /image/")])]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  192.168.31.171")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#charset koi8-r;")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#access_log  logs/host.access.log  main;")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /www/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   /data/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v("  index.html index.htm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /image/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v("   /data/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("autoindex")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("on")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("其中，"),a("code",[t._v("location /www/")]),t._v("配置用于访问html文件，"),a("code",[t._v("location /image/")]),t._v("配置用于访问图片静态资源。")]),t._v(" "),a("h2",{attrs:{id:"测试效果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试效果"}},[t._v("#")]),t._v(" 测试效果")]),t._v(" "),a("ol",[a("li",[t._v("首先，我们在浏览器中输入"),a("code",[t._v("http://192.168.31.171/image/")]),t._v("访问图片资源目录。")])]),t._v(" "),a("p",[t._v("​      "),a("img",{attrs:{src:"/%E6%9C%8D%E5%8A%A1%E5%99%A8/nginx/%E5%B1%95%E7%A4%BA%E7%9B%AE%E5%BD%95.png",alt:"展示目录"}})]),t._v(" "),a("p",[t._v("​       因为我们配置了"),a("code",[t._v("autoindex on")]),t._v("属性，这里展示出了当前image目录下的所有资源。")]),t._v(" "),a("p",[t._v("​       我们查看下该目录下的"),a("code",[t._v("01.jpg")]),t._v("图片文件：")]),t._v(" "),a("p",[t._v("​        "),a("img",{attrs:{src:"/%E6%9C%8D%E5%8A%A1%E5%99%A8/nginx/%E5%B1%95%E7%A4%BA%E5%9B%BE%E7%89%87.png",alt:"静态图片"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[t._v("接着，我们在浏览器中输入"),a("code",[t._v("http://192.168.31.171/www/a.html")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/%E6%9C%8D%E5%8A%A1%E5%99%A8/nginx/html%E6%96%87%E4%BB%B6.png",alt:"html文件"}})])])]),t._v(" "),a("p",[t._v("通过上面这个例子，我们简易配置了一个Nginx动静分离实例。")])])}),[],!1,null,null,null);a.default=e.exports}}]);