(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{687:function(s,a,e){"use strict";e.r(a);var t=e(74),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"redis简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis简介"}},[s._v("#")]),s._v(" Redis简介")]),s._v(" "),a("p",[a("strong",[s._v("Redis")]),s._v("全称为"),a("strong",[s._v("Remote Dictionary Server")]),s._v("，即远程的字典服务，是一个使用ANSI C语言编写的一种基于键值对（key-value）的NoSQL数据库，与很多键值对数据库不同的是，Redis中的值可以由string（字符串）、hash（哈希）、list（列表）、set（集合）、zset（有序集合）、Bitmaps（位图）、HyperLogLog、GEO（地理信息定位）等多种数据结构和算法组成，因此，Redis可以满足很多的应用场景，而且因为Redis会将所有数据都存放在内存中，所以它的读写性能非常惊人。")]),s._v(" "),a("p",[s._v("不仅如此，Redis还可以将内存的数据利用快照和日志的形式保存到硬盘上，这样在发生类似断电或者机器故障的时候，内存中的数据不会“丢失”。除了上述功能以外，Redis还提供了键过期、发布订阅、事务、流水线、Lua脚本等附加功能。")]),s._v(" "),a("h2",{attrs:{id:"适合使用redis的场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#适合使用redis的场景"}},[s._v("#")]),s._v(" 适合使用Redis的场景")]),s._v(" "),a("p",[s._v("对于Redis来说，Redis的应用场景广泛，总的来说，大致可以总结为下面5个场景。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("缓存")]),s._v("：缓存机制几乎在所有的大型网站都有使用，合理地使用缓存不仅可以加快数据的访问速度，而且能够有效地降低后端数据源的压力。Redis提供了键值过期时间设置，并且也提供了灵活控制最大内存和内存溢出后的淘汰策略。")]),s._v(" "),a("li",[a("strong",[s._v("排行榜系统")]),s._v("：排行榜系统几乎存在于所有的网站，例如按照热度排名的排行榜，按照发布时间的排行榜，按照各种复杂维度计算出的排行榜，Redis提供了列表和有序集合数据结构，合理地使用这些数据结构可以很方便地构建各种排行榜系统。")]),s._v(" "),a("li",[a("strong",[s._v("计数器应用")]),s._v("：计数器在网站中的作用至关重要，例如视频网站有播放数、电商网站有浏览数，为了保证数据的实时性，每一次播放和浏览都要做加1的操作，如果并发量很大对于传统关系型数据的性能是一种挑战。Redis天然支持计数功能而且计数的性能也非常好，可以说是计数器系统的重要选择。")]),s._v(" "),a("li",[a("strong",[s._v("社交网络")]),s._v("：社交网络赞/踩、粉丝、共同好友/喜好、推送、下拉刷新等是社交网站的必备功能，由于社交网站访问量通常比较大，而且传统的关系型数据不太适合保存这种类型的数据，Redis提供的数据结构可以相对比较容易地实现这些功能。")]),s._v(" "),a("li",[a("strong",[s._v("消息队列系统")]),s._v("：消息队列系统可以说是一个大型网站的必备基础组件，因为其具有业务解耦、非实时业务削峰等特性。Redis提供了发布订阅功能和阻塞队列的功能，虽然和专业的消息队列比还不够足够强大，但是对于一般的消息队列功能基本可以满足。")])]),s._v(" "),a("h2",{attrs:{id:"在linux上安装redis数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在linux上安装redis数据库"}},[s._v("#")]),s._v(" 在Linux上安装Redis数据库")]),s._v(" "),a("p",[s._v("在使用Redis数据库之前，我们需要先安装Redis数据库，在这里，我们是在Centos 7.x环境下安装的。在Linux中，通常有两种安装软件的方式，第一种是通过Linux软件包管理系统来安装，另外一种是通过下载源码，编译安装。一般情况下，我们使用源码编译安装的方式。")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("首先，我们先从Redis官网下载Redis源码")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://download.redis.io/releases/redis-5.0.5.tar.gz\n")])])])]),s._v(" "),a("li",[a("p",[s._v("然后，我们解缩redis-5.0.5.tar.gz压缩包")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" redis-5.0.5.tar.gz\n")])])])]),s._v(" "),a("li",[a("p",[s._v("接着，我们切换目录到已经解压的redis-5.0.5目录中。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis-5.0.5\n")])])])]),s._v(" "),a("li",[a("p",[s._v("编译源代码，生成可执行程序")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("安装可执行程序")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])])])]),s._v(" "),a("p",[s._v("当上述步骤都执行完毕，我们就完成了Redis的安装。此时，我们可以使用以下命令在任何目录下查看Redis的版本。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("redis-cli "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("\n")])])]),a("p",[s._v("若安装没有问题，输出redis的版本号"),a("code",[s._v("redis-cli 5.0.5")]),s._v("。当安装完Redis后，我们可以在目录/usr/local及其子目录中找到Redis的相关文件。")]),s._v(" "),a("p",[s._v("最后，我们将源代码中的redis.conf配置文件复制到安装目录中。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ./redis.conf /usr/local/bin\n")])])]),a("h2",{attrs:{id:"在windows上安装redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在windows上安装redis"}},[s._v("#")]),s._v(" 在Windows上安装Redis")]),s._v(" "),a("p",[s._v("Redis的官方并不支持微软的Windows操作系统，但是Redis作为一款优秀的开源技术吸引到了微软公司的注意，微软公司的开源技术组在GitHub上维护一个Redis的分支：https://github.com/MSOpenTech/redis")]),s._v(" "),a("p",[s._v("在Windows下安装Redis比较简单，直接下载Redis压缩包，并解压到自定义的目录下就可以使用了。")]),s._v(" "),a("h2",{attrs:{id:"redis的配置、启动、操作、关闭"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis的配置、启动、操作、关闭"}},[s._v("#")]),s._v(" Redis的配置、启动、操作、关闭")]),s._v(" "),a("p",[s._v("Redis安装之后，src和/usr/local/bin目录下多了几个以redis开头可执行文件，我们称之为Redis Shell，这些可执行文件可以做很多事情，例如可以启动和停止Redis、可以检测和修复Redis的持久化文件，还可以检测Redis的性\n能。")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[s._v("可执行文件")]),s._v(" "),a("th",{staticStyle:{"text-align":"center"}},[s._v("作用")])])]),s._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("redis-server")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("启动Redis")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("redis-cli")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("Redis命令行客户端")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("redis-benchmark")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("Redis基准测试工具")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("redis-check-aof")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("Redis AOF持久化文件检测和修复工具")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("redis-check-dump")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("Redis RDB持久化文件检测和修复工具")])]),s._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[s._v("redis-sentinel")]),s._v(" "),a("td",{staticStyle:{"text-align":"center"}},[s._v("启动Redis-Sentinel")])])])]),s._v(" "),a("h3",{attrs:{id:"启动redis的三种方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动redis的三种方式"}},[s._v("#")]),s._v(" 启动Redis的三种方式")]),s._v(" "),a("p",[s._v("对于Redis来说，有三种方法可以启动Redis，分别是默认配置、运行配置、配置文件启动。我们切换到")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("默认配置方式启动")]),s._v(" "),a("p",[s._v("这种方式会使用Redis的默认配置启动Redis")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("./redis-server\n")])])]),a("p",[s._v("下面就是redis-server执行后输出的相关日志")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8339")]),s._v(":C 08 Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":04:23.972 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8339")]),s._v(":C 08 Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":04:23.972 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis version=5.0.5, bits=64, commit=00000000, modified=0, pid=8339, just started")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8339")]),s._v(":C 08 Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":04:23.972 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8339")]),s._v(":M 08 Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":04:23.976 * Increased maximum number of "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" files to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10032")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("it was originally "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n                _._\n           _.-`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("__ "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("-._\n      _.-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("_.  "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("-._           Redis "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),s._v(".5 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("00000000/0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" bit\n  .-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(" .-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("/    _.,_ "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("-._\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("    '      ,       .-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v(",    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("     Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" standalone mode\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".-"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" __"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".-.`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("'"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" _.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'|     Port: 6379\n |    `-._   `._    /     _.-'")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("     PID: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8339")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._  "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-./  _.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    _.-'")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-.__.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    _.-'")]),s._v("_.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'|\n |    `-._`-._        _.-'")]),s._v("_.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    |           http://redis.io\n  `-._    `-._`-.__.-'")]),s._v("_.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    _.-'")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-.__.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'    _.-'")]),s._v("_.-'"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._        _.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'_.-'")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-._    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("-._"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("-.__.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'_.-'")]),s._v("    _.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\n      `-._    `-.__.-'")]),s._v("    _.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\n          `-._        _.-'")]),s._v("\n              `-.__.-"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\n\n8339:M 08 Aug 2019 17:04:23.989 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.\n8339:M 08 Aug 2019 17:04:23.990 # Server initialized\n8339:M 08 Aug 2019 17:04:23.991 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add '")]),s._v("vm.overcommit_memory "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' to /etc/sysctl.conf and then reboot or run the command '")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vm.overcommit_memory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("' "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" this to take effect.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8339")]),s._v(":M 08 Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":04:23.993 * Ready to accept connection\n")])])]),a("p",[s._v("可以看到直接使用redis-server启动Redis后，会打印出一些日志，通过日志我们可以看到一些信息。")]),s._v(" "),a("ul",[a("li",[s._v("当前Redis的版本是5.0.5")]),s._v(" "),a("li",[s._v("Redis的默认端口是6379")])]),s._v(" "),a("p",[a("strong",[s._v("Redis建议要使用配置文件来启动。因为直接启动无法自定义配置，所以这种方式是不会在生产环境中使用\n的。")])])]),s._v(" "),a("li",[a("p",[s._v("运行启动")]),s._v(" "),a("p",[s._v("redis-server加上要修改配置名和值（可以是多对），没有设置的配置将使用默认配置。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-server --configKey1 configValue1 --configKey2 configValue2")]),s._v("\n")])])]),a("p",[s._v("例如，如果要用6380作为端口启动Redis，那么可以执行")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("redis-server "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--port")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6380")]),s._v("\n")])])]),a("p",[a("strong",[s._v("虽然运行配置可以自定义配置，但是如果需要修改的配置较多或者希望将配置保存到文件中，不建议使用这种方式。")])])]),s._v(" "),a("li",[a("p",[s._v("配置文件启动")]),s._v(" "),a("p",[s._v("将配置写到指定文件里，例如我们将配置写到了/opt/redis/redis.conf中，那么只需要执行如下命令即可启动Redis")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-server /opt/redis/redis.conf")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),a("p",[s._v("Redis目录下都会有一个redis.conf配置文件，里面就是Redis的默认配置，通常来讲我们会在一台机器上启动多个Redis，并且将配置集中管理在指定目录下，而且配置不是完全手写的，而是将redis.conf作为模板进行修\n改。")])])])]),s._v(" "),a("p",[a("strong",[s._v("总而言之，通过配置文件启动的方式提供了更大的灵活性，所以大部分生产环境会使用这种方式启动Redis。")])]),s._v(" "),a("h3",{attrs:{id:"redis命令行客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis命令行客户端"}},[s._v("#")]),s._v(" Redis命令行客户端")]),s._v(" "),a("p",[s._v("现在我们已经启动了Redis服务，下面将介绍如何使用redis-cli连接、操作Redis服务。redis-cli可以使用两种方式连接Redis服务器。")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("交互式方式连接服务器")]),s._v("：通过"),a("code",[s._v("redis-cli -h {host} -p {port}")]),s._v("的方式连接到Redis服务，之后所有的操作都是通过交互的方式实现。不再需要redis-cli前缀了")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("redis-cli "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("命令式方式连接服务器")]),s._v("：用"),a("code",[s._v("redis-cli-h ip {host} -p {port} {command}")]),s._v("就可以直接得到命令的返回结果。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("redis-cli "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6379")]),s._v(" get xxx\n")])])])])]),s._v(" "),a("p",[s._v("需要注意的是，若没有"),a("code",[s._v("-h")]),s._v("参数，则默认是127.0.0.1,若没有"),a("code",[s._v("-p")]),s._v("参数，则默认是6379端口。")]),s._v(" "),a("h3",{attrs:{id:"停止redis服务的两种方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#停止redis服务的两种方式"}},[s._v("#")]),s._v(" 停止Redis服务的两种方式")]),s._v(" "),a("p",[s._v("Redis提供了shutdown命令来停止Redis服务，例如要停掉127.0.0.1上6379端口上的Redis服务，可以执行如下操作。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v("\n")])])]),a("p",[s._v("可以看到，但我们执行完这个命令，服务端将输出以下日志")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8343")]),s._v(":M 08 Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":38:14.716 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# User requested shutdown...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8343")]),s._v(":M 08 Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":38:14.716 * Saving the final RDB snapshot before exiting.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8343")]),s._v(":M 08 Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":38:14.731 * DB saved on disk\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8343")]),s._v(":M 08 Aug "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(":38:14.732 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Redis is now ready to exit, bye bye...")]),s._v("\n")])])]),a("p",[s._v("需要注意的是，")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("Redis关闭的过程：断开与客户端的连接、生成持久化文件，是一种相对优雅的关闭方式。")])]),s._v(" "),a("li",[a("p",[s._v("除了可以通过shutdown命令关闭Redis服务以外，还可以通过kill进程号的方式关闭掉Redis，但是不要"),a("strong",[s._v("粗暴地使用"),a("code",[s._v("kill -9")]),s._v("强制杀死Redis服务，不但不会做持久化操作，还会造成缓冲区等资源不能被优雅关闭，极端情况会造成AOF和复制丢失数据的情况。")])])]),s._v(" "),a("li",[a("p",[s._v("shutdown还有一个参数，代表是否在关闭Redis前，生成持久化文件。")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" nosave "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" save\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"redis的版本规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis的版本规则"}},[s._v("#")]),s._v(" Redis的版本规则")]),s._v(" "),a("p",[s._v("Redis借鉴了Linux操作系统对于版本号的命名规则："),a("strong",[s._v("版本号第二位如果是奇数，则为非稳定版本（例如2.7、2.9、3.1），如果是偶数，则为稳定版本（例如2.6、2.8、3.0、3.2）。")])]),s._v(" "),a("p",[s._v("当前奇数版本就是下一个稳定版本的开发版本，例如2.9版本是3.0版本的开发版本。所以我们在生产环境通常选取偶数版本的Redis，如果对于某些新的特性想提前了解和使用，可以选择最新的奇数版本。")])])}),[],!1,null,null,null);a.default=r.exports}}]);