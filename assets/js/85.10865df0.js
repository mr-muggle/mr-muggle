(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{735:function(a,s,t){"use strict";t.r(s);var n=t(74),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[a._v("#")]),a._v(" 准备工作")]),a._v(" "),s("p",[a._v("为了实现高可用，需要做如下准备：")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("准备两台服务器")])]),a._v(" "),s("li",[s("p",[a._v("在两台服务器上安装nginx软件，安装方式见前面章节")])]),a._v(" "),s("li",[s("p",[a._v("在两台服务器上安装keepalive软件，这里为了方便，直接使用yum安装")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" keepalived "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])]),s("p",[a._v("安装完成之后，在"),s("code",[a._v("/etc")]),a._v("下生成"),s("code",[a._v("keepalived")]),a._v("目录，在该目录下存在一个配置文件"),s("code",[a._v("keepalived.conf")]),a._v("。")])])]),a._v(" "),s("h2",{attrs:{id:"主服务器配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#主服务器配置"}},[a._v("#")]),a._v(" 主服务器配置")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("使用"),s("code",[a._v("vi /etc/keepalived/keepalived.conf")]),a._v("命令打开keepalived配置文件，并替换为如下配置：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("global_defs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n   notification_email "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".31.171\n   smtp_connect_timeout "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v("\n   router_id LVS_DEVEL\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\nvrrp_script chk_http_port "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  script "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/local/src/nginx_check.sh"')]),a._v("\n  interval "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#（检测脚本执行的间隔）")]),a._v("\n  weight "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\nvrrp_instance VI_1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    state MASTER\n    interface enp0s3\n    virtual_router_id "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("51")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 主、备机的 virtual_router_id 必须相同")]),a._v("\n    priority "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 主、备机取不同的优先级，主机值较大，备份机值较小")]),a._v("\n    advert_int "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n    authentication "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        auth_type PASS\n        auth_pass "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1111")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    virtual_ipaddress "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".31.222\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("在"),s("code",[a._v("/usr/local/src")]),a._v("目录下添加vrrp_script chk_http_port指定位置和名称的脚本文件。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("A")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" nginx –no-header "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$A")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-eq")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n /usr/local/nginx/sbin/nginx\n "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" nginx --no-header "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-eq")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("killall")]),a._v(" keepalived\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])])])])]),a._v(" "),s("h2",{attrs:{id:"从服务器配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从服务器配置"}},[a._v("#")]),a._v(" 从服务器配置")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("使用"),s("code",[a._v("vi /etc/keepalived/keepalived.conf")]),a._v("命令打开keepalived配置文件，并替换为如下配置：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("global_defs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n   notification_email "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".31.171\n   smtp_connect_timeout "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v("\n   router_id LVS_DEVEL\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\nvrrp_script chk_http_port "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  script "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/local/src/nginx_check.sh"')]),a._v("\n  interval "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#（检测脚本执行的间隔）")]),a._v("\n  weight "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\nvrrp_instance VI_1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    state MASTER\n    interface enp0s3\n    virtual_router_id "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("51")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 主、备机的 virtual_router_id 必须相同")]),a._v("\n    priority "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 主、备机取不同的优先级，主机值较大，备份机值较小")]),a._v("\n    advert_int "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n    authentication "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        auth_type PASS\n        auth_pass "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1111")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    virtual_ipaddress "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".31.222\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("和主服务器一样，在"),s("code",[a._v("/usr/local/src")]),a._v("目录下添加vrrp_script chk_http_port指定位置和名称的脚本文件，脚本文件完全相同。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/bin/bash")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("A")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" nginx –no-header "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$A")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-eq")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n /usr/local/nginx/sbin/nginx\n "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sleep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" nginx --no-header "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-l")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("`")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-eq")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("killall")]),a._v(" keepalived\n "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])])])])]),a._v(" "),s("h2",{attrs:{id:"启动nginx和keepalived"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动nginx和keepalived"}},[a._v("#")]),a._v(" 启动Nginx和Keepalived")]),a._v(" "),s("p",[a._v("在两台机器上分别启动nginx和keepalived：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("启动nginx，在nginx的sbin目录下，执行命令")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("./nginx\n")])])])]),a._v(" "),s("li",[s("p",[a._v("启动keepalived")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl start keepalived.service\n")])])])])]),a._v(" "),s("h2",{attrs:{id:"测试高可用效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试高可用效果"}},[a._v("#")]),a._v(" 测试高可用效果")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("在浏览器输入"),s("code",[a._v("192.168.31.222")]),a._v("，此时服务器访问nginx主页。")]),a._v(" "),s("p",[s("img",{attrs:{src:"/%E6%9C%8D%E5%8A%A1%E5%99%A8/nginx/%E9%AB%98%E5%8F%AF%E7%94%A8nginx%E9%A6%96%E9%A1%B5.png",alt:"nginx高可用"}})])]),a._v(" "),s("li",[s("p",[a._v("测试高可用，关掉主服务器nginx和keepalived，先关闭keepalived")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("systemctl stop keepalived.service\n")])])]),s("p",[a._v("再关闭nginx")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("./nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" stop\n")])])])])]),a._v(" "),s("p",[a._v("此时，再次刷新页面，发现还能正常访问nginx，nginx主服务器被关闭，服务被切换到nginx从服务器。")]),a._v(" "),s("h2",{attrs:{id:"keepalived配置文件详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#keepalived配置文件详解"}},[a._v("#")]),a._v(" Keepalived配置文件详解")]),a._v(" "),s("p",[a._v("从上面的配置文件看，配置文件可以分为三大部分：全局配置、脚本配置，虚拟ip配置。")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("全局配置")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("global_defs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n   notification_email "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n     acassen@firewall.loc\n     failover@firewall.loc\n     sysadmin@firewall.loc\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".31.171\n   smtp_connect_timeout "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v("\n   router_id LVS_DEVEL\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("       \n")])])]),s("p",[a._v("其中，router_id为服务器的名字，可以在"),s("code",[a._v("/etc/hosts")]),a._v("中进行配置。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1 LVS_DEVEL\n")])])])]),a._v(" "),s("li",[s("p",[a._v("检测脚本配置")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("vrrp_script chk_http_port "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  script "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/usr/local/src/nginx_check.sh"')]),a._v("\n  interval "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#（检测脚本执行的间隔）")]),a._v("\n  weight "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("ul",[s("li",[a._v("script用于指定脚本位置")]),a._v(" "),s("li",[a._v("interval代表脚本执行的时间间隔，2代表每隔两秒执行一次")]),a._v(" "),s("li",[a._v("weight代表当前服务器的权重")])])]),a._v(" "),s("li",[s("p",[a._v("虚拟ip配置")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("vrrp_instance VI_1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    state MASTER\n    interface enp0s3\n    virtual_router_id "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("51")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 主、备机的 virtual_router_id 必须相同")]),a._v("\n    priority "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 主、备机取不同的优先级，主机值较大，备份机值较小")]),a._v("\n    advert_int "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n    authentication "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        auth_type PASS\n        auth_pass "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1111")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    virtual_ipaddress "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".31.222\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("ul",[s("li",[a._v("state代表该服务器是主服务器还是备份服务器，主服务器则设置为MASTER，备份服务器则是BACKUP。")]),a._v(" "),s("li",[a._v("interface用于指定虚拟ip绑定到哪一个网卡中，interface后面是网卡的名称，可以使用ifconfig命令进行查看。")]),a._v(" "),s("li",[a._v("virtual_router_id代表主备机的ip主机，相当于唯一标识")]),a._v(" "),s("li",[a._v("priority代表主备机的优先级，主机值较大，备份机较小")]),a._v(" "),s("li",[a._v("advert_int表示每隔多长时间发送一个心跳，检测主机或者服务器是否还活着")]),a._v(" "),s("li",[a._v("authentication代表权限校验的方式")]),a._v(" "),s("li",[a._v("virtual_ipaddress配置虚拟ip，这里可以绑定多个虚拟ip")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);